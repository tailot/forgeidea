<div class="category-container">

    <div *ngIf="errorMessage" class="error-message">
        <p>Error: {{ errorMessage }}</p>
        <button mat-button color="warn" (click)="loadCategories()">Retry</button>
    </div>

    <div *ngIf="!errorMessage">
        <mat-chip-listbox aria-label="Select an idea category" (change)="onCategorySelectionChange($event.value)"
            [(ngModel)]="selectedCategory"> 

            <ng-container *ngIf="categories$ | async as categories; else loadingOrNoData">
                <mat-chip-listbox class="mat-mdc-chip-set-stacked" aria-label="Cutest dog breeds">
                    <mat-chip-option *ngFor="let category of categories" [value]="category">
                        <h1>{{ category }}</h1>
                    </mat-chip-option>
                </mat-chip-listbox>
            </ng-container>
            <ng-template #loadingOrNoData>
                <p *ngIf="(categories$ | async)?.length === 0 && !errorMessage">
                    No categories found or still loading...
                </p>
            </ng-template>
        </mat-chip-listbox>
    </div>
</div>